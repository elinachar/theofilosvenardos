<%= form_for @wedding_album do |f| %>
  <% if wedding_album.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(wedding_album.errors.count, "error") %> prohibited this wedding_album from being saved:</h2>

      <ul>
      <% wedding_album.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="wedding-album-translations">
    <%= f.fields_for :wedding_album_translations do |wedding_album_translation| %>
      <%= render 'wedding_album_translation_fields', f: wedding_album_translation %>
    <% end %>
  </div>

  <div class="field cover-photo">
    <% if @wedding_album.photo? %>
      <p>Cover photo</p>
      <div class="row uploaded-cover-photo">
        <div class="col-3 col-md-2">
          <%= image_tag( @wedding_album.photo.url.to_s , class: "img-fluid", alt: @wedding_album.wedding_album_translations.first.title) %>
        </div>
        <p class="col-7 col-md-10"><b>Uploaded photo:</b> <%= @wedding_album.photo %></p>
      </div><br/>
      <%= f.label :photo, "<span><b>Replace</b> cover photo</span>".html_safe %>
    <% else %>
      <%= f.label :photo, "Cover photo" %>
    <% end %>
    <%= f.file_field :photo %>
  </div>

  <div class="field">
    <%= f.label :wedding_on %>
    <%= f.date_select :wedding_on,  class: 'form-control' %>
  </div>

  <div class="wedding-photos">
    <div class="wedding-photos-show">
      <p>Wedding Photos</p>
      <%= f.fields_for :wedding_photos do |wedding_photo| %>
        <%= render 'wedding_photo_fields', f: wedding_photo %>
      <% end %>
    </div>

    <div class="links">
      <%= link_to_add_association 'Add Photo', f, :wedding_photos, class: "btn", data: { association_insertion_node: ".wedding-photos-show", association_insertion_method: :append } %>
    </div>
  </div>

  <div class="actions">
    <% if @wedding_album.persisted? %>
      <%= f.submit "Update wedding album", class: "btn" %>
    <% else %>
      <%= f.submit "Create wedding album", class: "btn" %>
    <% end %>
  </div>
<% end %>
